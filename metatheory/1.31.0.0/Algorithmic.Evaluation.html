<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Algorithmic.Evaluation</title>
    <link rel="stylesheet" href="./Agda.css">
  </head>
  <body>
    <h1>Algorithmic.Evaluation</h1>
    <section>
      <pre class="Agda"><a id="56" class="Keyword">module</a> <a id="63" href="Algorithmic.Evaluation.html" class="Module">Algorithmic.Evaluation</a> <a id="86" class="Keyword">where</a>
</pre>
<h2 id="imports">Imports</h2>

<pre class="Agda"><a id="113" class="Keyword">open</a> <a id="118" class="Keyword">import</a> <a id="125" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="134" class="Keyword">using</a> <a id="140" class="Symbol">(</a><a id="141" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="142" class="Symbol">;</a><a id="143" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a><a id="147" class="Symbol">;</a><a id="148" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a><a id="151" class="Symbol">)</a>
<a id="153" class="Keyword">open</a> <a id="158" class="Keyword">import</a> <a id="165" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="203" class="Keyword">using</a> <a id="209" class="Symbol">(</a><a id="210" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="214" class="Symbol">)</a>
<a id="216" class="Keyword">open</a> <a id="221" class="Keyword">import</a> <a id="228" href="Utils.html" class="Module">Utils</a> <a id="234" class="Keyword">using</a> <a id="240" class="Symbol">(</a><a id="241" href="Utils.html#6821" class="InductiveConstructor">*</a><a id="242" class="Symbol">;</a><a id="243" href="Utils.html#1126" class="Datatype">Either</a><a id="249" class="Symbol">;</a><a id="250" href="Utils.html#1159" class="InductiveConstructor">inj₁</a><a id="254" class="Symbol">;</a><a id="255" href="Utils.html#4362" class="Datatype">RuntimeError</a><a id="267" class="Symbol">;</a><a id="268" href="Utils.html#2913" class="Field">return</a><a id="274" class="Symbol">)</a>
<a id="276" class="Keyword">open</a> <a id="281" href="Utils.html#4362" class="Module">RuntimeError</a>

<a id="295" class="Keyword">open</a> <a id="300" class="Keyword">import</a> <a id="307" href="Type.html" class="Module">Type</a> <a id="312" class="Keyword">using</a> <a id="318" class="Symbol">(</a><a id="319" href="Type.html#534" class="InductiveConstructor">∅</a><a id="320" class="Symbol">)</a>
<a id="322" class="Keyword">open</a> <a id="327" class="Keyword">import</a> <a id="334" href="Type.BetaNormal.html" class="Module">Type.BetaNormal</a> <a id="350" class="Keyword">using</a> <a id="356" class="Symbol">(</a><a id="357" href="Type.BetaNormal.html#1046" class="Datatype Operator">_⊢Nf⋆_</a><a id="363" class="Symbol">)</a>
<a id="365" class="Keyword">open</a> <a id="370" class="Keyword">import</a> <a id="377" href="Algorithmic.html" class="Module">Algorithmic</a> <a id="389" class="Keyword">using</a> <a id="395" class="Symbol">(</a><a id="396" href="Algorithmic.html#5298" class="Datatype Operator">_⊢_</a><a id="399" class="Symbol">;</a><a id="400" href="Algorithmic.html#1668" class="InductiveConstructor">∅</a><a id="401" class="Symbol">)</a>
<a id="403" class="Keyword">open</a> <a id="408" href="Algorithmic.html#5298" class="Module Operator">_⊢_</a>
<a id="412" class="Keyword">open</a> <a id="417" class="Keyword">import</a> <a id="424" href="Algorithmic.ReductionEC.html" class="Module">Algorithmic.ReductionEC</a> <a id="448" class="Keyword">using</a> <a id="454" class="Symbol">(</a><a id="455" href="Algorithmic.ReductionEC.html#2138" class="Datatype">Value</a><a id="460" class="Symbol">;</a><a id="461" href="Algorithmic.ReductionEC.html#5685" class="Datatype">Error</a><a id="466" class="Symbol">;</a><a id="467" href="Algorithmic.ReductionEC.html#10868" class="Datatype Operator">_—↠_</a><a id="471" class="Symbol">;</a><a id="472" href="Algorithmic.ReductionEC.html#10391" class="Datatype Operator">_—→_</a><a id="476" class="Symbol">;</a><a id="477" href="Algorithmic.ReductionEC.html#5765" class="InductiveConstructor">E-error</a><a id="484" class="Symbol">)</a>
<a id="486" class="Keyword">open</a> <a id="491" class="Keyword">import</a> <a id="498" href="Algorithmic.ReductionEC.Progress.html" class="Module">Algorithmic.ReductionEC.Progress</a> <a id="531" class="Keyword">using</a>  <a id="538" class="Symbol">(</a><a id="539" href="Algorithmic.ReductionEC.Progress.html#895" class="Datatype">Progress</a><a id="547" class="Symbol">;</a><a id="548" href="Algorithmic.ReductionEC.Progress.html#1017" class="InductiveConstructor">done</a><a id="552" class="Symbol">;</a><a id="553" href="Algorithmic.ReductionEC.Progress.html#2076" class="Function">progress</a><a id="561" class="Symbol">;</a><a id="562" href="Algorithmic.ReductionEC.Progress.html#945" class="InductiveConstructor">step</a><a id="566" class="Symbol">)</a>
<a id="568" class="Keyword">open</a> <a id="573" href="Algorithmic.ReductionEC.html#10868" class="Module Operator">_—↠_</a>
</pre>
<h2 id="evaluation">Evaluation</h2>

<p>As previously, gas is specified by a natural number.</p>
<pre class="Agda"><a id="655" class="Keyword">data</a> <a id="Gas"></a><a id="660" href="Algorithmic.Evaluation.html#660" class="Datatype">Gas</a> <a id="664" class="Symbol">:</a> <a id="666" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="670" class="Keyword">where</a>
  <a id="Gas.gas"></a><a id="678" href="Algorithmic.Evaluation.html#678" class="InductiveConstructor">gas</a> <a id="682" class="Symbol">:</a> <a id="684" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="686" class="Symbol">→</a> <a id="688" href="Algorithmic.Evaluation.html#660" class="Datatype">Gas</a>
</pre>
<p>When our evaluator returns a term <code class="language-plaintext highlighter-rouge">N</code>, it will either give evidence that
<code class="language-plaintext highlighter-rouge">N</code> is a value or indicate that it ran out of gas.</p>
<pre class="Agda"><a id="824" class="Keyword">data</a> <a id="Finished"></a><a id="829" href="Algorithmic.Evaluation.html#829" class="Datatype">Finished</a> <a id="838" class="Symbol">{</a><a id="839" href="Algorithmic.Evaluation.html#839" class="Bound">A</a> <a id="841" class="Symbol">:</a> <a id="843" href="Type.html#534" class="InductiveConstructor">∅</a> <a id="845" href="Type.BetaNormal.html#1046" class="Datatype Operator">⊢Nf⋆</a> <a id="850" href="Utils.html#6821" class="InductiveConstructor">*</a><a id="851" class="Symbol">}</a> <a id="853" class="Symbol">:</a>  <a id="856" class="Symbol">(</a><a id="857" href="Algorithmic.Evaluation.html#857" class="Bound">N</a> <a id="859" class="Symbol">:</a> <a id="861" href="Algorithmic.html#1668" class="InductiveConstructor">∅</a> <a id="863" href="Algorithmic.html#5298" class="Datatype Operator">⊢</a> <a id="865" href="Algorithmic.Evaluation.html#839" class="Bound">A</a><a id="866" class="Symbol">)</a> <a id="868" class="Symbol">→</a>  <a id="871" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="875" class="Keyword">where</a>

   <a id="Finished.done"></a><a id="885" href="Algorithmic.Evaluation.html#885" class="InductiveConstructor">done</a> <a id="890" class="Symbol">:</a> <a id="892" class="Symbol">∀</a> <a id="894" href="Algorithmic.Evaluation.html#894" class="Bound">N</a> <a id="896" class="Symbol">→</a> 
       <a id="906" href="Algorithmic.ReductionEC.html#2138" class="Datatype">Value</a> <a id="912" href="Algorithmic.Evaluation.html#894" class="Bound">N</a>
       <a id="921" class="Comment">----------</a>
     <a id="937" class="Symbol">→</a> <a id="939" href="Algorithmic.Evaluation.html#829" class="Datatype">Finished</a> <a id="948" href="Algorithmic.Evaluation.html#894" class="Bound">N</a>

   <a id="Finished.out-of-gas"></a><a id="954" href="Algorithmic.Evaluation.html#954" class="InductiveConstructor">out-of-gas</a> <a id="965" class="Symbol">:</a> <a id="967" class="Symbol">∀{</a><a id="969" href="Algorithmic.Evaluation.html#969" class="Bound">N</a><a id="970" class="Symbol">}</a> <a id="972" class="Symbol">→</a> 
       <a id="982" class="Comment">----------</a>
       <a id="1000" href="Algorithmic.Evaluation.html#829" class="Datatype">Finished</a> <a id="1009" href="Algorithmic.Evaluation.html#969" class="Bound">N</a>

   <a id="Finished.error"></a><a id="1015" href="Algorithmic.Evaluation.html#1015" class="InductiveConstructor">error</a> <a id="1021" class="Symbol">:</a> <a id="1023" class="Symbol">{</a><a id="1024" href="Algorithmic.Evaluation.html#1024" class="Bound">L</a> <a id="1026" class="Symbol">:</a> <a id="1028" href="Algorithmic.html#1668" class="InductiveConstructor">∅</a> <a id="1030" href="Algorithmic.html#5298" class="Datatype Operator">⊢</a> <a id="1032" href="Algorithmic.Evaluation.html#839" class="Bound">A</a><a id="1033" class="Symbol">}</a> <a id="1035" class="Symbol">→</a> <a id="1037" href="Algorithmic.ReductionEC.html#5685" class="Datatype">Error</a> <a id="1043" href="Algorithmic.Evaluation.html#1024" class="Bound">L</a> <a id="1045" class="Symbol">→</a> <a id="1047" href="Algorithmic.Evaluation.html#829" class="Datatype">Finished</a> <a id="1056" href="Algorithmic.Evaluation.html#1024" class="Bound">L</a>

   <a id="1062" class="Comment">-- is this actually possible?</a>
<a id="1092" class="Comment">--   neutral : {L : ∅ ⊢ A} → Neutral L → Finished L</a>
</pre>
<p>Given a term <code class="language-plaintext highlighter-rouge">L</code> of type <code class="language-plaintext highlighter-rouge">A</code>, the evaluator will, for some <code class="language-plaintext highlighter-rouge">N</code>, return
Ma reduction sequence from <code class="language-plaintext highlighter-rouge">L</code> to <code class="language-plaintext highlighter-rouge">N</code> and an indication of whether
reduction finished.</p>
<pre class="Agda"><a id="1310" class="Keyword">data</a> <a id="Steps"></a><a id="1315" href="Algorithmic.Evaluation.html#1315" class="Datatype">Steps</a> <a id="1321" class="Symbol">:</a> <a id="1323" class="Symbol">∀</a> <a id="1325" class="Symbol">{</a><a id="1326" href="Algorithmic.Evaluation.html#1326" class="Bound">A</a> <a id="1328" class="Symbol">:</a> <a id="1330" href="Type.html#534" class="InductiveConstructor">∅</a> <a id="1332" href="Type.BetaNormal.html#1046" class="Datatype Operator">⊢Nf⋆</a> <a id="1337" href="Utils.html#6821" class="InductiveConstructor">*</a><a id="1338" class="Symbol">}</a> <a id="1340" class="Symbol">→</a> <a id="1342" href="Algorithmic.html#1668" class="InductiveConstructor">∅</a> <a id="1344" href="Algorithmic.html#5298" class="Datatype Operator">⊢</a> <a id="1346" href="Algorithmic.Evaluation.html#1326" class="Bound">A</a> <a id="1348" class="Symbol">→</a> <a id="1350" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1354" class="Keyword">where</a>

  <a id="Steps.steps"></a><a id="1363" href="Algorithmic.Evaluation.html#1363" class="InductiveConstructor">steps</a> <a id="1369" class="Symbol">:</a> <a id="1371" class="Symbol">{</a><a id="1372" href="Algorithmic.Evaluation.html#1372" class="Bound">A</a> <a id="1374" class="Symbol">:</a> <a id="1376" href="Type.html#534" class="InductiveConstructor">∅</a> <a id="1378" href="Type.BetaNormal.html#1046" class="Datatype Operator">⊢Nf⋆</a> <a id="1383" href="Utils.html#6821" class="InductiveConstructor">*</a><a id="1384" class="Symbol">}</a> <a id="1386" class="Symbol">{</a><a id="1387" href="Algorithmic.Evaluation.html#1387" class="Bound">L</a> <a id="1389" href="Algorithmic.Evaluation.html#1389" class="Bound">N</a> <a id="1391" class="Symbol">:</a> <a id="1393" href="Algorithmic.html#1668" class="InductiveConstructor">∅</a> <a id="1395" href="Algorithmic.html#5298" class="Datatype Operator">⊢</a> <a id="1397" href="Algorithmic.Evaluation.html#1372" class="Bound">A</a><a id="1398" class="Symbol">}</a>
    <a id="1404" class="Symbol">→</a> <a id="1406" href="Algorithmic.Evaluation.html#1387" class="Bound">L</a> <a id="1408" href="Algorithmic.ReductionEC.html#10868" class="Datatype Operator">—↠</a> <a id="1411" href="Algorithmic.Evaluation.html#1389" class="Bound">N</a>
    <a id="1417" class="Symbol">→</a> <a id="1419" href="Algorithmic.Evaluation.html#829" class="Datatype">Finished</a> <a id="1428" href="Algorithmic.Evaluation.html#1389" class="Bound">N</a>
      <a id="1436" class="Comment">----------</a>
    <a id="1451" class="Symbol">→</a> <a id="1453" href="Algorithmic.Evaluation.html#1315" class="Datatype">Steps</a> <a id="1459" href="Algorithmic.Evaluation.html#1387" class="Bound">L</a>


</pre>
<pre class="Agda"><a id="eval—→"></a><a id="1472" href="Algorithmic.Evaluation.html#1472" class="Function">eval—→</a>  <a id="1480" class="Symbol">:</a> <a id="1482" class="Symbol">∀{</a><a id="1484" href="Algorithmic.Evaluation.html#1484" class="Bound">A</a> <a id="1486" class="Symbol">:</a> <a id="1488" class="InductiveConstructor">∅</a> <a id="1490" href="Type.BetaNormal.html#1046" class="Datatype Operator">⊢Nf⋆</a> <a id="1495" href="Utils.html#6821" class="InductiveConstructor">*</a><a id="1496" class="Symbol">}</a> <a id="1498" class="Symbol">→</a> <a id="1500" class="Symbol">{</a><a id="1501" href="Algorithmic.Evaluation.html#1501" class="Bound">t</a> <a id="1503" href="Algorithmic.Evaluation.html#1503" class="Bound">t&#39;</a> <a id="1506" class="Symbol">:</a> <a id="1508" class="InductiveConstructor">∅</a> <a id="1510" href="Algorithmic.html#5298" class="Datatype Operator">⊢</a> <a id="1512" href="Algorithmic.Evaluation.html#1484" class="Bound">A</a><a id="1513" class="Symbol">}</a> <a id="1515" class="Symbol">→</a> <a id="1517" href="Algorithmic.Evaluation.html#1501" class="Bound">t</a> <a id="1519" href="Algorithmic.ReductionEC.html#10391" class="Datatype Operator">—→</a> <a id="1522" href="Algorithmic.Evaluation.html#1503" class="Bound">t&#39;</a> <a id="1525" class="Symbol">→</a>
  <a id="1529" href="Algorithmic.Evaluation.html#1315" class="Datatype">Steps</a> <a id="1535" href="Algorithmic.Evaluation.html#1503" class="Bound">t&#39;</a> <a id="1538" class="Symbol">→</a> <a id="1540" href="Algorithmic.Evaluation.html#1315" class="Datatype">Steps</a> <a id="1546" href="Algorithmic.Evaluation.html#1501" class="Bound">t</a>
<a id="1548" href="Algorithmic.Evaluation.html#1472" class="Function">eval—→</a> <a id="1555" href="Algorithmic.Evaluation.html#1555" class="Bound">p</a> <a id="1557" class="Symbol">(</a><a id="1558" href="Algorithmic.Evaluation.html#1363" class="InductiveConstructor">steps</a> <a id="1564" href="Algorithmic.Evaluation.html#1564" class="Bound">ps</a> <a id="1567" href="Algorithmic.Evaluation.html#1567" class="Bound">q</a><a id="1568" class="Symbol">)</a> <a id="1570" class="Symbol">=</a> <a id="1572" href="Algorithmic.Evaluation.html#1363" class="InductiveConstructor">steps</a> <a id="1578" class="Symbol">(</a><a id="1579" href="Algorithmic.ReductionEC.html#10979" class="InductiveConstructor">trans—↠</a> <a id="1587" href="Algorithmic.Evaluation.html#1555" class="Bound">p</a> <a id="1589" href="Algorithmic.Evaluation.html#1564" class="Bound">ps</a><a id="1591" class="Symbol">)</a> <a id="1593" href="Algorithmic.Evaluation.html#1567" class="Bound">q</a>
</pre>
<p>The evaluator takes gas and a term and returns the corresponding steps.</p>
<pre class="Agda"><a id="eval"></a><a id="1676" href="Algorithmic.Evaluation.html#1676" class="Function">eval</a> <a id="1681" class="Symbol">:</a> <a id="1683" class="Symbol">∀</a> <a id="1685" class="Symbol">{</a><a id="1686" href="Algorithmic.Evaluation.html#1686" class="Bound">A</a> <a id="1688" class="Symbol">:</a> <a id="1690" class="InductiveConstructor">∅</a> <a id="1692" href="Type.BetaNormal.html#1046" class="Datatype Operator">⊢Nf⋆</a> <a id="1697" href="Utils.html#6821" class="InductiveConstructor">*</a><a id="1698" class="Symbol">}</a> <a id="1700" class="Symbol">→</a> <a id="1702" href="Algorithmic.Evaluation.html#660" class="Datatype">Gas</a> <a id="1706" class="Symbol">→</a> <a id="1708" class="Symbol">(</a><a id="1709" href="Algorithmic.Evaluation.html#1709" class="Bound">M</a> <a id="1711" class="Symbol">:</a> <a id="1713" class="InductiveConstructor">∅</a> <a id="1715" href="Algorithmic.html#5298" class="Datatype Operator">⊢</a> <a id="1717" href="Algorithmic.Evaluation.html#1686" class="Bound">A</a><a id="1718" class="Symbol">)</a> <a id="1720" class="Symbol">→</a> <a id="1722" href="Algorithmic.Evaluation.html#1315" class="Datatype">Steps</a> <a id="1728" href="Algorithmic.Evaluation.html#1709" class="Bound">M</a>
<a id="evalProg"></a><a id="1730" href="Algorithmic.Evaluation.html#1730" class="Function">evalProg</a> <a id="1739" class="Symbol">:</a> <a id="1741" class="Symbol">∀{</a><a id="1743" href="Algorithmic.Evaluation.html#1743" class="Bound">A</a> <a id="1745" class="Symbol">:</a> <a id="1747" class="InductiveConstructor">∅</a> <a id="1749" href="Type.BetaNormal.html#1046" class="Datatype Operator">⊢Nf⋆</a> <a id="1754" href="Utils.html#6821" class="InductiveConstructor">*</a><a id="1755" class="Symbol">}</a> <a id="1757" class="Symbol">→</a> <a id="1759" href="Algorithmic.Evaluation.html#660" class="Datatype">Gas</a> <a id="1763" class="Symbol">→</a> <a id="1765" class="Symbol">{</a><a id="1766" href="Algorithmic.Evaluation.html#1766" class="Bound">t</a> <a id="1768" class="Symbol">:</a> <a id="1770" class="InductiveConstructor">∅</a> <a id="1772" href="Algorithmic.html#5298" class="Datatype Operator">⊢</a> <a id="1774" href="Algorithmic.Evaluation.html#1743" class="Bound">A</a><a id="1775" class="Symbol">}</a> <a id="1777" class="Symbol">→</a> <a id="1779" href="Algorithmic.ReductionEC.Progress.html#895" class="Datatype">Progress</a> <a id="1788" href="Algorithmic.Evaluation.html#1766" class="Bound">t</a> <a id="1790" class="Symbol">→</a> <a id="1792" href="Algorithmic.Evaluation.html#1315" class="Datatype">Steps</a> <a id="1798" href="Algorithmic.Evaluation.html#1766" class="Bound">t</a>

<a id="1801" href="Algorithmic.Evaluation.html#1676" class="Function">eval</a> <a id="1806" class="Symbol">(</a><a id="1807" href="Algorithmic.Evaluation.html#678" class="InductiveConstructor">gas</a> <a id="1811" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a><a id="1815" class="Symbol">)</a> <a id="1817" href="Algorithmic.Evaluation.html#1817" class="Bound">M</a> <a id="1819" class="Symbol">=</a> <a id="1821" href="Algorithmic.Evaluation.html#1363" class="InductiveConstructor">steps</a> <a id="1827" href="Algorithmic.ReductionEC.html#10923" class="InductiveConstructor">refl—↠</a> <a id="1834" href="Algorithmic.Evaluation.html#954" class="InductiveConstructor">out-of-gas</a>
<a id="1845" href="Algorithmic.Evaluation.html#1676" class="Function">eval</a> <a id="1850" class="Symbol">(</a><a id="1851" href="Algorithmic.Evaluation.html#678" class="InductiveConstructor">gas</a> <a id="1855" class="Symbol">(</a><a id="1856" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1860" href="Algorithmic.Evaluation.html#1860" class="Bound">n</a><a id="1861" class="Symbol">))</a> <a id="1864" href="Algorithmic.Evaluation.html#1864" class="Bound">M</a> <a id="1866" class="Symbol">=</a> <a id="1868" href="Algorithmic.Evaluation.html#1730" class="Function">evalProg</a> <a id="1877" class="Symbol">(</a><a id="1878" href="Algorithmic.Evaluation.html#678" class="InductiveConstructor">gas</a> <a id="1882" href="Algorithmic.Evaluation.html#1860" class="Bound">n</a><a id="1883" class="Symbol">)</a> <a id="1885" class="Symbol">(</a><a id="1886" href="Algorithmic.ReductionEC.Progress.html#2076" class="Function">progress</a> <a id="1895" href="Algorithmic.Evaluation.html#1864" class="Bound">M</a><a id="1896" class="Symbol">)</a>

<a id="1899" href="Algorithmic.Evaluation.html#1730" class="Function">evalProg</a> <a id="1908" href="Algorithmic.Evaluation.html#1908" class="Bound">g</a> <a id="1910" class="Symbol">(</a><a id="1911" href="Algorithmic.ReductionEC.Progress.html#945" class="InductiveConstructor">step</a> <a id="1916" class="Symbol">{</a><a id="1917" class="Argument">N</a> <a id="1919" class="Symbol">=</a> <a id="1921" class="DottedPattern Symbol">.(</a><a id="1923" href="Algorithmic.html#7652" class="DottedPattern InductiveConstructor">error</a> <a id="1929" class="DottedPattern Symbol">_)</a><a id="1931" class="Symbol">}</a> <a id="1933" class="Symbol">(</a><a id="1934" href="Algorithmic.ReductionEC.html#10637" class="InductiveConstructor">_—→_.ruleErr</a> <a id="1947" href="Algorithmic.ReductionEC.html#7398" class="InductiveConstructor">Algorithmic.ReductionEC.[]</a> <a id="1974" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="1978" class="Symbol">))</a> <a id="1981" class="Symbol">=</a> <a id="1983" href="Algorithmic.Evaluation.html#1363" class="InductiveConstructor">steps</a> <a id="1989" href="Algorithmic.ReductionEC.html#10923" class="InductiveConstructor">refl—↠</a> <a id="1996" class="Symbol">(</a><a id="1997" href="Algorithmic.Evaluation.html#1015" class="InductiveConstructor">error</a> <a id="2003" href="Algorithmic.ReductionEC.html#5765" class="InductiveConstructor">E-error</a><a id="2010" class="Symbol">)</a>
<a id="2012" href="Algorithmic.Evaluation.html#1730" class="CatchallClause Function">evalProg</a><a id="2020" class="CatchallClause"> </a><a id="2021" href="Algorithmic.Evaluation.html#2021" class="CatchallClause Bound">g</a><a id="2022" class="CatchallClause"> </a><a id="2023" class="CatchallClause Symbol">(</a><a id="2024" href="Algorithmic.ReductionEC.Progress.html#945" class="CatchallClause InductiveConstructor">step</a><a id="2028" class="CatchallClause"> </a><a id="2029" class="CatchallClause Symbol">{</a><a id="2030" class="CatchallClause Argument">N</a><a id="2031" class="CatchallClause"> </a><a id="2032" class="CatchallClause Symbol">=</a><a id="2033" class="CatchallClause"> </a><a id="2034" href="Algorithmic.Evaluation.html#2034" class="CatchallClause Bound">t&#39;</a><a id="2036" class="CatchallClause Symbol">}</a><a id="2037" class="CatchallClause"> </a><a id="2038" href="Algorithmic.Evaluation.html#2038" class="CatchallClause Bound">p</a><a id="2039" class="CatchallClause Symbol">)</a>  <a id="2042" class="Symbol">=</a> <a id="2044" href="Algorithmic.Evaluation.html#1472" class="Function">eval—→</a> <a id="2051" href="Algorithmic.Evaluation.html#2038" class="Bound">p</a> <a id="2053" class="Symbol">(</a><a id="2054" href="Algorithmic.Evaluation.html#1676" class="Function">eval</a> <a id="2059" href="Algorithmic.Evaluation.html#2021" class="Bound">g</a> <a id="2061" href="Algorithmic.Evaluation.html#2034" class="Bound">t&#39;</a><a id="2063" class="Symbol">)</a>
<a id="2065" href="Algorithmic.Evaluation.html#1730" class="Function">evalProg</a> <a id="2074" href="Algorithmic.Evaluation.html#2074" class="Bound">g</a> <a id="2076" class="Symbol">(</a><a id="2077" href="Algorithmic.ReductionEC.Progress.html#1017" class="InductiveConstructor">done</a> <a id="2082" href="Algorithmic.Evaluation.html#2082" class="Bound">VM</a><a id="2084" class="Symbol">)</a> <a id="2086" class="Symbol">=</a> <a id="2088" href="Algorithmic.Evaluation.html#1363" class="InductiveConstructor">steps</a> <a id="2094" href="Algorithmic.ReductionEC.html#10923" class="InductiveConstructor">refl—↠</a> <a id="2101" class="Symbol">(</a><a id="2102" href="Algorithmic.Evaluation.html#885" class="InductiveConstructor">done</a> <a id="2107" class="Symbol">_</a> <a id="2109" href="Algorithmic.Evaluation.html#2082" class="Bound">VM</a><a id="2111" class="Symbol">)</a>

<a id="stepper"></a><a id="2114" href="Algorithmic.Evaluation.html#2114" class="Function">stepper</a> <a id="2122" class="Symbol">:</a> <a id="2124" class="Symbol">{</a><a id="2125" href="Algorithmic.Evaluation.html#2125" class="Bound">A</a> <a id="2127" class="Symbol">:</a> <a id="2129" class="InductiveConstructor">∅</a> <a id="2131" href="Type.BetaNormal.html#1046" class="Datatype Operator">⊢Nf⋆</a> <a id="2136" href="Utils.html#6821" class="InductiveConstructor">*</a><a id="2137" class="Symbol">}</a> <a id="2139" class="Symbol">→</a> <a id="2141" class="InductiveConstructor">∅</a> <a id="2143" href="Algorithmic.html#5298" class="Datatype Operator">⊢</a> <a id="2145" href="Algorithmic.Evaluation.html#2125" class="Bound">A</a> <a id="2147" class="Symbol">→</a> <a id="2149" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="2151" class="Symbol">→</a> <a id="2153" href="Utils.html#1126" class="Datatype">Either</a> <a id="2160" href="Utils.html#4362" class="Datatype">RuntimeError</a> <a id="2173" class="Symbol">(</a><a id="2174" class="InductiveConstructor">∅</a> <a id="2176" href="Algorithmic.html#5298" class="Datatype Operator">⊢</a> <a id="2178" href="Algorithmic.Evaluation.html#2125" class="Bound">A</a><a id="2179" class="Symbol">)</a>
<a id="2181" href="Algorithmic.Evaluation.html#2114" class="Function">stepper</a> <a id="2189" class="Symbol">{</a><a id="2190" href="Algorithmic.Evaluation.html#2190" class="Bound">A</a><a id="2191" class="Symbol">}</a> <a id="2193" href="Algorithmic.Evaluation.html#2193" class="Bound">t</a> <a id="2195" href="Algorithmic.Evaluation.html#2195" class="Bound">n</a> <a id="2197" class="Keyword">with</a> <a id="2202" href="Algorithmic.Evaluation.html#1676" class="Function">eval</a> <a id="2207" class="Symbol">(</a><a id="2208" href="Algorithmic.Evaluation.html#678" class="InductiveConstructor">gas</a> <a id="2212" href="Algorithmic.Evaluation.html#2195" class="Bound">n</a><a id="2213" class="Symbol">)</a> <a id="2215" href="Algorithmic.Evaluation.html#2193" class="Bound">t</a>
<a id="2217" class="Symbol">...</a> <a id="2221" class="Symbol">|</a> <a id="2223" href="Algorithmic.Evaluation.html#1363" class="InductiveConstructor">steps</a> <a id="2229" href="Algorithmic.Evaluation.html#2229" class="Bound">x</a> <a id="2231" class="Symbol">(</a><a id="2232" href="Algorithmic.Evaluation.html#885" class="InductiveConstructor">done</a> <a id="2237" href="Algorithmic.Evaluation.html#2237" class="Bound">t&#39;</a> <a id="2240" href="Algorithmic.Evaluation.html#2240" class="Bound">v</a><a id="2241" class="Symbol">)</a> <a id="2243" class="Symbol">=</a> <a id="2245" href="Utils.html#2913" class="Field">return</a> <a id="2252" href="Algorithmic.Evaluation.html#2237" class="Bound">t&#39;</a>
<a id="2255" class="Symbol">...</a> <a id="2259" class="Symbol">|</a> <a id="2261" href="Algorithmic.Evaluation.html#1363" class="InductiveConstructor">steps</a> <a id="2267" href="Algorithmic.Evaluation.html#2267" class="Bound">x</a> <a id="2269" href="Algorithmic.Evaluation.html#954" class="InductiveConstructor">out-of-gas</a>  <a id="2281" class="Symbol">=</a> <a id="2283" href="Utils.html#1159" class="InductiveConstructor">inj₁</a> <a id="2288" href="Utils.html#4389" class="InductiveConstructor">gasError</a>
<a id="2297" class="Symbol">...</a> <a id="2301" class="Symbol">|</a> <a id="2303" href="Algorithmic.Evaluation.html#1363" class="InductiveConstructor">steps</a> <a id="2309" href="Algorithmic.Evaluation.html#2309" class="Bound">x</a> <a id="2311" class="Symbol">(</a><a id="2312" href="Algorithmic.Evaluation.html#1015" class="InductiveConstructor">error</a> <a id="2318" class="Symbol">_)</a>   <a id="2323" class="Symbol">=</a> <a id="2325" href="Utils.html#2913" class="Field">return</a> <a id="2332" class="Symbol">(</a><a id="2333" href="Algorithmic.html#7652" class="InductiveConstructor">error</a> <a id="2339" class="Bound">A</a><a id="2340" class="Symbol">)</a>

</pre>

    </section>
  </body>
</html>